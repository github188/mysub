<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>4.&nbsp;&#29468;&#25968;&#23383;&#20043;Rife&#29256;</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="Java&#32593;&#32476;&#31243;&#24207;&#21592;&#30475;Continuation"><link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;RIFE&#31616;&#20171;"><link rel="prev" href="ch05s03.html" title="3.&nbsp;Counter&#20043;Rife&#29256;"><link rel="next" href="pr03.html" title="&#21518;&#35760;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.&nbsp;&#29468;&#25968;&#23383;&#20043;Rife&#29256;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s03.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;RIFE&#31616;&#20171;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="pr03.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e746"></a>4.&nbsp;&#29468;&#25968;&#23383;&#20043;Rife&#29256;</h2></div></div></div><p>&#19979;&#38754;&#25105;&#20204;&#26469;&#30475;&#30475;Rife&#37324;&#22914;&#20309;&#20889;&#29468;&#25968;&#23383;&#28216;&#25103;&#12290;&#26377;&#24847;&#24605;&#30340;&#26159;&#65292;Rife&#30340;&#33539;&#20363;&#31243;&#24207;&#65298;&#21644;&#33539;&#20363;&#31243;&#24207;&#65299;&#20998;&#21035;&#26159;&#29468;&#25968;&#23383;&#28216;&#25103;&#30340;&#38750;continuation&#29256;&#21644;continuation&#29256;&#12290;&#26082;&#28982;&#25105;&#20204;&#30340;&#39064;&#30446;&#26159;Java&#32593;&#32476;&#31243;&#24207;&#21592;&#30475;continuation&#65292;&#25105;&#20204;&#22312;&#36825;&#37324;&#23601;&#19981;&#35762;&#35299;&#20854;&#38750;continuation&#29256;&#26412;&#20102;&#12290;&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#21487;&#20197;&#33258;&#24049;&#30475;&#30475;&#22914;&#20309;&#22312;Rife&#19979;&#23454;&#29616;&#29468;&#25968;&#23383;&#30340;&#20256;&#32479;&#20570;&#27861;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#26469;&#30475;&#30475;Rife&#20013;&#26159;&#22914;&#20309;&#29992;continuation&#20889;&#29468;&#25968;&#23383;&#28216;&#25103;&#30340;&#12290;</p><p>&#39318;&#20808;&#65292;&#25105;&#20204;&#22312;public.xml&#37324;&#23450;&#20041;&#31243;&#24207;&#38656;&#35201;&#30340;element&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE site SYSTEM "/dtd/site.dtd"&gt;
&lt;site&gt;
  &lt;arrival destid="numguess"/&gt;
  &lt;element id="numguess" 
           implementation="numguess.Game" 
           url="numguess"&gt;
    &lt;submission name="perform_guess"&gt;
      &lt;param name="guess"/&gt;
    &lt;/submission&gt;
  
    &lt;exit name="SUCCESS"/&gt;
    &lt;flowlink srcexit="SUCCESS" destid="success"/&gt;
  &lt;/element&gt;
  
  &lt;element id="success" 
           extends="rife/template/print.xml"
           url="success"&gt;
    &lt;property name="name"&gt;numguess.success&lt;/property&gt;
  &lt;/element&gt;  
&lt;/site&gt;</pre><p>&#25105;&#20204;&#23450;&#20041;&#20102;&#20004;&#20010;&#37096;&#20214;&#65292;numguess&#21644;success&#12290;&#23545;&#20110;numguess&#37096;&#20214;&#65292;&#25105;&#20204;&#23450;&#20041;&#20102;&#19968;&#20010;&#20986;&#21475;SUCCESS&#65292;&#24182;&#22312;flowlink&#20013;&#25226;&#23427;&#36830;&#33267;success&#37096;&#20214;&#12290;Success&#37096;&#20214;&#30340;&#23450;&#20041;&#30001;rife/template/print.xml&#24310;&#20280;&#32780;&#26469;&#65292;&#21518;&#32773;&#26159;Rife&#20869;&#24314;&#37096;&#20214;&#65292;&#23427;&#30340;&#21151;&#33021;&#26159;&#36755;&#20986;&#20854;name&#25351;&#23450;&#30340;&#27169;&#29256;&#12290;&#36825;&#37324;&#25105;&#20204;&#23450;&#20041;&#35813;&#27169;&#29256;&#20026;numguess.success&#12290;</p><p>&#19979;&#38754;&#26159;src/templates/numguess/success.html&#30340;&#20869;&#23481;&#65292;&#23427;&#26159;success&#37096;&#20214;&#30340;&#27169;&#29256;&#12290;</p><pre class="programlisting">&lt;!--I 'common.blueprint'/--&gt;
&lt;!--BV 'window_title'--&gt;Congratulations!&lt;!--/BV--&gt;
&lt;!--BV 'content'--&gt;
  &lt;div class="content"&gt;
    &lt;h1&gt;Congratulations!&lt;/h1&gt;
  &lt;/div&gt;
&lt;!--/BV--&gt;</pre><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#27983;&#35272;<code class="uri">http://localhost:8080/success</code>&#65292;&#30475;&#30475;success&#37096;&#20214;&#26174;&#31034;&#26159;&#21542;&#27491;&#24120;&#12290;</p><div class="screenshot"><div class="mediaobject"><img src="resources/numguess-rife-success.png"></div></div><p>&#30830;&#35748;success&#37096;&#20214;&#24037;&#20316;&#27491;&#24120;&#21518;&#65292;&#25105;&#20204;&#26469;&#23454;&#29616;numguess&#37096;&#20214;&#12290;&#19979;&#38754;&#26159;src/implementation/numguess/Game.java&#25991;&#20214;&#65292;&#25105;&#20204;&#23454;&#29616;&#20102;setGuess()&#26041;&#27861;&#29992;&#26469;&#25509;&#21463;perform_guess&#25552;&#20132;&#30340;guess&#20540;&#12290;&#28216;&#25103;&#30340;&#36923;&#36753;&#37117;&#22312;processElement()&#26041;&#27861;&#20013;&#65292;&#27880;&#24847;&#21040;&#36825;&#26159;Rife&#20013;&#30340;&#29305;&#27530;&#20989;&#25968;&#65292;&#21482;&#26377;&#23427;&#25903;&#25345;continuation&#12290;&#19979;&#38754;&#31243;&#24207;&#30340;&#36923;&#36753;&#26041;&#38754;&#38500;&#20102;pause()&#20197;&#22806;&#21644;Seaside&#30456;&#24403;&#31867;&#20284;&#65292;&#25105;&#20204;&#23601;&#19981;&#22810;&#21152;&#35299;&#37322;&#20102;&#12290;</p><pre class="programlisting">package numguess;

import java.util.Random;

import com.uwyn.rife.engine.Element;
import com.uwyn.rife.template.Template;

public class Game extends Element {
    private Template template;
    private int guess;
    
    public int getGuess() {
        return guess;
    }

    public void setGuess(int guess) {
        this.guess = guess;
    }

    public void initialize() {
    }
    
    public void processElement() {
        int answer = new Random().nextInt(101);
        template = getHtmlTemplate("numguess.game");
        
        while (true) {
            print(template);
            pause();
            
            if (guess &lt; answer) {
                template.setValue("message", 
                    "Number too small.");
                template.setValue("window_title", 
                    "Number too small.");
            } else if (guess &gt; answer) {
                template.setValue("message", 
                    "Number too big.");
                template.setValue("window_title", 
                    "Number too big.");
            } else {
                exit("SUCCESS");
            }
        }
    }
}</pre><p>&#26368;&#21518;&#19968;&#27493;&#26159;&#23454;&#29616;&#19978;&#38754;&#29992;&#21040;&#30340;&#27169;&#29256;numguess.game&#12290;&#35813;&#27169;&#29256;&#26144;&#23556;&#33267;&#25991;&#20214;src/templates/numguess/game.html&#12290;&#20854;&#20869;&#23481;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;!--I 'common.blueprint'/--&gt;
&lt;!--BV 'window_title'--&gt;Number Guessing Game&lt;!--/BV--&gt;
&lt;!--BV 'content'--&gt;
    &lt;div class="content"&gt;
        &lt;h1&gt;Number Guessing Game&lt;/h1&gt;
        &lt;p&gt;&lt;!--V 'message'--&gt;&lt;!--/V--&gt;&lt;/p&gt;
        &lt;form action="[!V 'SUBMISSION:FORM:perform_guess'/]"
              method="post"&gt;
            &lt;!--V 'SUBMISSION:PARAMS:perform_guess'/--&gt;
            &lt;input type='text' name='guess' 
                   value="[!V 'PARAM:guess'][!/V]"/&gt;
            &lt;input type='submit' value="Guess"/&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;!--/BV--&gt;</pre><p>&#19978;&#38754;&#30340;&#27169;&#29256;&#38656;&#35201;&#31245;&#24494;&#35299;&#37322;&#19968;&#19979;&#12290;[ !V &#8216;SUBMISSION:FORM:perform_guess&#8217;/]&#23450;&#20041;&#35813;&#34920;&#26684;&#20250;&#24341;&#21457;perform_guess&#36825;&#20010;&#25552;&#20132;&#21160;&#20316;&#65288;submission&#65289;&#12290;&#21478;&#22806;&#65292;&lt; !--V &#8216;SUBMISSION :PARAMS :perform_guess&#8217;/--&gt;&#35821;&#21477;&#22312;&#25152;&#26377;&#30340;&#34920;&#26684;&#20013;&#37117;&#24517;&#39035;&#23384;&#22312;&#65292;&#23427;&#20250;&#29983;&#25104;&#20960;&#20010;Rife&#20869;&#37096;&#20351;&#29992;&#30340;hidden field&#12290;&#26368;&#21518;&#65292;input&#20013;&#30340;[ !V &#8216;PARAM:guess&#8217;][!/V]&#34920;&#31034;&#35813;input&#25552;&#20379;guess&#21442;&#25968;&#12290;&#35813;&#20540;&#26368;&#32456;&#20250;&#20197;setGuess()&#30340;&#26041;&#24335;&#20256;&#32473;numguess.Game&#31867;&#12290;</p><p>&#22909;&#20102;&#65292;&#25105;&#20204;&#30340;&#26368;&#21518;&#19968;&#20010;&#29468;&#25968;&#23383;&#28216;&#25103;&#23436;&#25104;&#20102;&#12290;&#27983;&#35272;<code class="uri">http://localhost:8080/numguess</code>&#65292;&#25105;&#20204;&#30475;&#21040;&#65306;</p><div class="screenshot"><div class="mediaobject"><img src="resources/numguess-rife-game.png"></div></div><p>&#20241;&#24687;&#19968;&#19979;&#65292;&#29609;&#29609;&#33258;&#24049;&#20889;&#30340;&#23567;&#28216;&#25103;&#21543;&#12290;&#65306;&#65289;</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s03.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="pr03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.&nbsp;Counter&#20043;Rife&#29256;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;&#21518;&#35760;</td></tr></table></div></body></html>